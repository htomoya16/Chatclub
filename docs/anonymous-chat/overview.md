# 匿名チャット機能 概要

本機能は、Discord 上で**発言者を匿名化して投稿する**ための仕組みを提供する。
匿名性を担保するため、実ユーザ情報の永続保存は行わない。

---

## 1. 目的

- サーバ内で匿名発言の場を提供する
- 既存の会話チャンネルを荒らさず、専用チャンネルでの匿名会話を可能にする
- `/anon` コマンドによる一時的な匿名発言を可能にする

---

## 2. 機能範囲

### 2.1 専用チャンネル方式

- 管理者が「匿名チャンネル」を指定する
- 指定チャンネルに投稿されたメッセージを **Bot が削除 → 匿名で再投稿** する
- 投稿は Webhook を利用し、固定の表示名・アイコンで行う

### 2.2 `/anon` コマンド方式

- どのチャンネルでも `/anon` により匿名投稿できる
- 投稿は Webhook を利用し、固定の表示名・アイコンで行う
- 元の内容はチャンネルに表示されない（スラッシュコマンド入力のみ）

---

## 3. 非スコープ / 方針

- **投稿内容の DB 保存は行わない**
- **実ユーザを追跡する仕組みは持たない**
- 通報・履歴閲覧などの管理機能は提供しない

---

## 4. 匿名性に関する前提

- 専用チャンネル方式は「削除 → 再投稿」のため、
  **元メッセージが短時間表示される可能性**がある
- Webhook の表示名/アイコンは固定とし、ユーザ情報は出さない
- アプリログにユーザIDや内容を**恒常的に残さない**方針とする

---

## 5. 必要権限

- メッセージ削除（Manage Messages）
- Webhook 管理（Manage Webhooks）
- メッセージ送信 / 添付送信
- メッセージ閲覧
- Message Content Intent（特権インテント）

---

## 6. 関連ドキュメント

- `docs/anonymous-chat/flow.md`
- `docs/anonymous-chat/command.md`
- `docs/anonymous-chat/data-model.md`
